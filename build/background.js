(()=>{"use strict";var e={133:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(554));t.default=class{constructor(e,t="https://api.metaphor.systems"){this.baseURL=t,this.headers=new a.Headers({"x-api-key":e,"Content-Type":"application/json","User-Agent":"metaphor-node 1.0.19"})}async request(e,t,r){const n=await(0,a.default)(this.baseURL+e,{method:t,headers:this.headers,body:r?JSON.stringify(r):void 0});if(!n.ok){const e=(await n.json()).error;throw new Error(`Request failed with status ${n.status}. ${e}`)}return await n.json()}async search(e,t){return await this.request("/search","POST",{query:e,...t})}async findSimilar(e,t){return await this.request("/findSimilar","POST",{url:e,...t})}async getContents(e){if(0===e.length)throw new Error("Must provide at least one ID");let t;t="string"==typeof e[0]?e:e.map((e=>e.id));const r=new URLSearchParams({ids:t.join(",")});return await this.request(`/contents?${r}`,"GET")}}},554:(e,t,r)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(133);const t=new(r.n(e)())("68126cf9-7208-443b-aa93-76e539fc60de");chrome.runtime.onMessage.addListener(((e,r,n)=>("metaphorSearch"==e.type&&(async()=>{const r=await(async e=>(await t.search(e)).results)("Here is a research paper on the "+e.query);r.sort(((e,t)=>0==e.title.length&&0==t.title.length?e.score>t.score?-1:1:0==e.title.length?1:0==t.title.length||e.score>t.score?-1:1)),n({result:r})})(),!0)))})()})();